{
  "version": 3,
  "sources": ["../../react-infinite-scroller/src/InfiniteScroll.js"],
  "sourcesContent": ["import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default class InfiniteScroll extends Component {\r\n  static propTypes = {\r\n    children: PropTypes.node.isRequired,\r\n    element: PropTypes.node,\r\n    hasMore: PropTypes.bool,\r\n    initialLoad: PropTypes.bool,\r\n    isReverse: PropTypes.bool,\r\n    loader: PropTypes.node,\r\n    loadMore: PropTypes.func.isRequired,\r\n    pageStart: PropTypes.number,\r\n    ref: PropTypes.func,\r\n    getScrollParent: PropTypes.func,\r\n    threshold: PropTypes.number,\r\n    useCapture: PropTypes.bool,\r\n    useWindow: PropTypes.bool\r\n  };\r\n\r\n  static defaultProps = {\r\n    element: 'div',\r\n    hasMore: false,\r\n    initialLoad: true,\r\n    pageStart: 0,\r\n    ref: null,\r\n    threshold: 250,\r\n    useWindow: true,\r\n    isReverse: false,\r\n    useCapture: false,\r\n    loader: null,\r\n    getScrollParent: null\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.scrollListener = this.scrollListener.bind(this);\r\n    this.eventListenerOptions = this.eventListenerOptions.bind(this);\r\n    this.mousewheelListener = this.mousewheelListener.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.pageLoaded = this.props.pageStart;\r\n    this.options = this.eventListenerOptions();\r\n    this.attachScrollListener();\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (this.props.isReverse && this.loadMore) {\r\n      const parentElement = this.getParentElement(this.scrollComponent);\r\n      parentElement.scrollTop =\r\n        parentElement.scrollHeight -\r\n        this.beforeScrollHeight +\r\n        this.beforeScrollTop;\r\n      this.loadMore = false;\r\n    }\r\n    this.attachScrollListener();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.detachScrollListener();\r\n    this.detachMousewheelListener();\r\n  }\r\n\r\n  isPassiveSupported() {\r\n    let passive = false;\r\n\r\n    const testOptions = {\r\n      get passive() {\r\n        passive = true;\r\n      }\r\n    };\r\n\r\n    try {\r\n      document.addEventListener('test', null, testOptions);\r\n      document.removeEventListener('test', null, testOptions);\r\n    } catch (e) {\r\n      // ignore\r\n    }\r\n    return passive;\r\n  }\r\n\r\n  eventListenerOptions() {\r\n    let options = this.props.useCapture;\r\n\r\n    if (this.isPassiveSupported()) {\r\n      options = {\r\n        useCapture: this.props.useCapture,\r\n        passive: true\r\n      };\r\n    } else {\r\n      options = {\r\n        passive: false\r\n      };\r\n    }\r\n    return options;\r\n  }\r\n\r\n  // Set a defaut loader for all your `InfiniteScroll` components\r\n  setDefaultLoader(loader) {\r\n    this.defaultLoader = loader;\r\n  }\r\n\r\n  detachMousewheelListener() {\r\n    let scrollEl = window;\r\n    if (this.props.useWindow === false) {\r\n      scrollEl = this.scrollComponent.parentNode;\r\n    }\r\n\r\n    scrollEl.removeEventListener(\r\n      'mousewheel',\r\n      this.mousewheelListener,\r\n      this.options ? this.options : this.props.useCapture\r\n    );\r\n  }\r\n\r\n  detachScrollListener() {\r\n    let scrollEl = window;\r\n    if (this.props.useWindow === false) {\r\n      scrollEl = this.getParentElement(this.scrollComponent);\r\n    }\r\n\r\n    scrollEl.removeEventListener(\r\n      'scroll',\r\n      this.scrollListener,\r\n      this.options ? this.options : this.props.useCapture\r\n    );\r\n    scrollEl.removeEventListener(\r\n      'resize',\r\n      this.scrollListener,\r\n      this.options ? this.options : this.props.useCapture\r\n    );\r\n  }\r\n\r\n  getParentElement(el) {\r\n    const scrollParent =\r\n      this.props.getScrollParent && this.props.getScrollParent();\r\n    if (scrollParent != null) {\r\n      return scrollParent;\r\n    }\r\n    return el && el.parentNode;\r\n  }\r\n\r\n  filterProps(props) {\r\n    return props;\r\n  }\r\n\r\n  attachScrollListener() {\r\n    const parentElement = this.getParentElement(this.scrollComponent);\r\n\r\n    if (!this.props.hasMore || !parentElement) {\r\n      return;\r\n    }\r\n\r\n    let scrollEl = window;\r\n    if (this.props.useWindow === false) {\r\n      scrollEl = parentElement;\r\n    }\r\n\r\n    scrollEl.addEventListener(\r\n      'mousewheel',\r\n      this.mousewheelListener,\r\n      this.options ? this.options : this.props.useCapture\r\n    );\r\n    scrollEl.addEventListener(\r\n      'scroll',\r\n      this.scrollListener,\r\n      this.options ? this.options : this.props.useCapture\r\n    );\r\n    scrollEl.addEventListener(\r\n      'resize',\r\n      this.scrollListener,\r\n      this.options ? this.options : this.props.useCapture\r\n    );\r\n\r\n    if (this.props.initialLoad) {\r\n      this.scrollListener();\r\n    }\r\n  }\r\n\r\n  mousewheelListener(e) {\r\n    // Prevents Chrome hangups\r\n    // See: https://stackoverflow.com/questions/47524205/random-high-content-download-time-in-chrome/47684257#47684257\r\n    if (e.deltaY === 1 && !this.isPassiveSupported()) {\r\n      e.preventDefault();\r\n    }\r\n  }\r\n\r\n  scrollListener() {\r\n    const el = this.scrollComponent;\r\n    const scrollEl = window;\r\n    const parentNode = this.getParentElement(el);\r\n\r\n    let offset;\r\n    if (this.props.useWindow) {\r\n      const doc =\r\n        document.documentElement || document.body.parentNode || document.body;\r\n      const scrollTop =\r\n        scrollEl.pageYOffset !== undefined\r\n          ? scrollEl.pageYOffset\r\n          : doc.scrollTop;\r\n      if (this.props.isReverse) {\r\n        offset = scrollTop;\r\n      } else {\r\n        offset = this.calculateOffset(el, scrollTop);\r\n      }\r\n    } else if (this.props.isReverse) {\r\n      offset = parentNode.scrollTop;\r\n    } else {\r\n      offset = el.scrollHeight - parentNode.scrollTop - parentNode.clientHeight;\r\n    }\r\n\r\n    // Here we make sure the element is visible as well as checking the offset\r\n    if (\r\n      offset < Number(this.props.threshold) &&\r\n      (el && el.offsetParent !== null)\r\n    ) {\r\n      this.detachScrollListener();\r\n      this.beforeScrollHeight = parentNode.scrollHeight;\r\n      this.beforeScrollTop = parentNode.scrollTop;\r\n      // Call loadMore after detachScrollListener to allow for non-async loadMore functions\r\n      if (typeof this.props.loadMore === 'function') {\r\n        this.props.loadMore((this.pageLoaded += 1));\r\n        this.loadMore = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  calculateOffset(el, scrollTop) {\r\n    if (!el) {\r\n      return 0;\r\n    }\r\n\r\n    return (\r\n      this.calculateTopPosition(el) +\r\n      (el.offsetHeight - scrollTop - window.innerHeight)\r\n    );\r\n  }\r\n\r\n  calculateTopPosition(el) {\r\n    if (!el) {\r\n      return 0;\r\n    }\r\n    return el.offsetTop + this.calculateTopPosition(el.offsetParent);\r\n  }\r\n\r\n  render() {\r\n    const renderProps = this.filterProps(this.props);\r\n    const {\r\n      children,\r\n      element,\r\n      hasMore,\r\n      initialLoad,\r\n      isReverse,\r\n      loader,\r\n      loadMore,\r\n      pageStart,\r\n      ref,\r\n      threshold,\r\n      useCapture,\r\n      useWindow,\r\n      getScrollParent,\r\n      ...props\r\n    } = renderProps;\r\n\r\n    props.ref = node => {\r\n      this.scrollComponent = node;\r\n      if (ref) {\r\n        ref(node);\r\n      }\r\n    };\r\n\r\n    const childrenArray = [children];\r\n    if (hasMore) {\r\n      if (loader) {\r\n        isReverse ? childrenArray.unshift(loader) : childrenArray.push(loader);\r\n      } else if (this.defaultLoader) {\r\n        isReverse\r\n          ? childrenArray.unshift(this.defaultLoader)\r\n          : childrenArray.push(this.defaultLoader);\r\n      }\r\n    }\r\n    return React.createElement(element, props, childrenArray);\r\n  }\r\n}\r\n"],
  "mappings": "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",
  "names": ["React", "PropTypes"]
}
